(this["webpackJsonpwebinar-frontend-test-task"]=this["webpackJsonpwebinar-frontend-test-task"]||[]).push([[0],{100:function(t,e,a){"use strict";a.r(e);var n=a(0),o=a.n(n),c=a(14),r=a.n(c),i=(a(93),a(149)),d=a(51),s=a(78),l=a(148),j=a(2),b=a(25),u=a(9),O=a(143),f=a(144),m=a(147),h=a(145),x=a(152),g=a(146),v=a(75),p=a.n(v),I=a(76),y=a.n(I),S=a(74),C=a.n(S),w=a(138),k=a(5),E=a(68),T=a.n(E),D=a(150),N=a(12),F=a(42),L=a(6),B=Object(n.createContext)(null),J={todoItems:[]},R="todoListState",M=function(t){var e=t.children,a=Object(n.useReducer)(W,J),o=Object(u.a)(a,2),c=o[0],r=o[1];return Object(n.useEffect)((function(){function t(t){var e=localStorage.getItem(R);if(e)try{r({type:"loadState",data:JSON.parse(e)})}catch(a){}}return window.addEventListener("storage",t),function(){window.removeEventListener("storage",t)}}),[]),Object(n.useEffect)((function(){var t=localStorage.getItem(R);if(t)try{r({type:"loadState",data:JSON.parse(t)})}catch(e){}}),[]),Object(n.useEffect)((function(){localStorage.setItem(R,JSON.stringify(c))}),[c]),Object(L.jsx)(B.Provider,{value:Object(j.a)(Object(j.a)({},c),{},{dispatch:r}),children:e})},P=function(){var t=Object(n.useContext)(B);if(!t)throw new Error("useTodoItems hook should only be used inside TodoItemsContextProvider");return t};function W(t,e){switch(e.type){case"loadState":return e.data;case"add":return Object(j.a)(Object(j.a)({},t),{},{todoItems:[Object(j.a)({id:"".concat(Date.now().toString(36),"-").concat(Math.floor(1e16*Math.random()).toString(36)),done:!1},e.data.todoItem)].concat(Object(N.a)(t.todoItems))});case"delete":return Object(j.a)(Object(j.a)({},t),{},{todoItems:t.todoItems.filter((function(t){return t.id!==e.data.id}))});case"dragEnd":return Object(j.a)(Object(j.a)({},t),{},{todoItems:Object(F.b)(t.todoItems,e.data.oldIndex,e.data.newIndex)});case"setSorted":var a=t.todoItems.slice().sort((function(t,e){return t.done&&!e.done?1:!t.done&&e.done?-1:0}));return Object(j.a)(Object(j.a)({},t),{},{todoItems:a});case"infoChange":console.log(e.data);var n=t.todoItems.findIndex((function(t){return t.id===e.data.id})),o=e.data.title,c=e.data.details;return Object(j.a)(Object(j.a)({},t),{},{todoItems:t.todoItems.map((function(t,e){return n===e?Object(j.a)(Object(j.a)({},t),{},{title:o,details:c}):t}))});case"toggleDone":var r=t.todoItems.findIndex((function(t){return t.id===e.data.id})),i=t.todoItems[r];return Object(j.a)(Object(j.a)({},t),{},{todoItems:[].concat(Object(N.a)(t.todoItems.slice(0,r)),[Object(j.a)(Object(j.a)({},i),{},{done:!i.done})],Object(N.a)(t.todoItems.slice(r+1)))});default:throw new Error}}var q=a(17),A=a(8),V=a(142),z=a(151),G=a(77),H=a.n(G),K={type:"spring",damping:25,stiffness:120,duration:.25},Q=Object(w.a)({root:{listStyle:"none",padding:0}}),U=Object(k.a)((function(t){return{root:{marginTop:"15px"}}}))(V.a),X="isSortingState",Y=function(){var t=P(),e=t.dispatch,a=t.todoItems,o=Q(),c=Object(n.useMemo)((function(){return a.map((function(t){return t.id}))}),[a]),r=Object(n.useCallback)((function(t){var a,n;if((null===(a=t.over)||void 0===a?void 0:a.id)&&t.active.id!==(null===(n=t.over)||void 0===n?void 0:n.id)){var o=c.indexOf(t.active.id),r=c.indexOf(t.over.id);localStorage.setItem(X,"false"),e({type:"dragEnd",data:{oldIndex:o,newIndex:r}})}}),[c,e]),i=Object(n.useCallback)((function(){return e({type:"setSorted",data:void 0})}),[e]);return Object(L.jsx)(L.Fragment,{children:Object(L.jsx)(q.a,{onDragEnd:r,children:Object(L.jsxs)(F.a,{items:a.map((function(t){return t.id})),children:[Object(L.jsx)(U,{variant:"contained",color:"secondary",onClick:function(){localStorage.removeItem(X),i()},startIcon:Object(L.jsx)(C.a,{}),children:"Sort Again"}),Object(L.jsx)("ul",{className:o.root,children:a.map((function(t){return Object(L.jsx)(D.a.li,{transition:K,layout:!0,children:Object(L.jsx)($,{item:t})},t.id)}))})]})})})},Z=Object(w.a)({root:{marginTop:24,marginBottom:24},doneRoot:{textDecoration:"line-through",color:"#888888"}}),$=function(t){var e=t.item,a=Z(),o=P().dispatch,c=Object(F.c)({id:e.id}),r=c.attributes,i=c.listeners,s=c.setNodeRef,l=c.transform,v=c.transition,I={transform:l?A.a.Translate.toString(l):"",transition:null!==v&&void 0!==v?v:""},S=Object(n.useCallback)((function(){return o({type:"delete",data:{id:e.id}})}),[e.id,o]),C=Object(n.useCallback)((function(){return o({type:"toggleDone",data:{id:e.id}})}),[e.id,o]),w=Object(n.useState)(e.title),k=Object(u.a)(w,2),E=k[0],D=k[1],N=Object(n.useState)(e.details),B=Object(u.a)(N,2),J=B[0],R=B[1],M=Object(n.useState)(),W=Object(u.a)(M,2),q=W[0],V=W[1];Object(n.useEffect)((function(){D(e.title),R(e.details)}),[e.title,e.details]);var G=Object(n.useCallback)((function(){E.length>1?(V(void 0),o({type:"infoChange",data:{id:e.id,title:E,details:J}})):V("Title should be at least 1 char")}),[E,J,e.id,o]);return Object(L.jsxs)(O.a,{ref:s,style:I,className:T()(a.root,Object(b.a)({},a.doneRoot,e.done)),children:[Object(L.jsx)(f.a,{action:Object(L.jsx)(h.a,{"aria-label":"delete",onClick:S,children:Object(L.jsx)(p.a,{})}),title:Object(L.jsx)(g.a,{control:Object(L.jsx)(x.a,{checked:e.done,onChange:C,name:"checked-".concat(e.id),color:"primary"}),label:e.title}),avatar:Object(L.jsx)(h.a,Object(j.a)(Object(j.a)(Object(j.a)({"aria-label":"drag"},r),i),{},{children:Object(L.jsx)(y.a,{})})),subheader:Object(L.jsxs)(L.Fragment,{children:[Object(L.jsxs)("div",{style:{display:"flex"},children:[Object(L.jsx)(z.a,{required:!0,style:{marginRight:"20px"},placeholder:"Edit title",type:"text",error:Boolean(q),onChange:function(t){D(t.target.value)},value:E}),Object(L.jsx)(z.a,{placeholder:"Edit details",type:"text",onChange:function(t){return R(t.target.value)},value:J}),Object(L.jsx)(h.a,{onClick:G,children:Object(L.jsx)(H.a,{})})]}),q]})}),e.details?Object(L.jsx)(m.a,{children:Object(L.jsx)(d.a,{variant:"body2",component:"p",children:e.details})}):null]})},_=a(61),tt=Object(w.a)((function(){return{root:{marginBottom:24}}}));function et(){var t=tt(),e=P().dispatch,a=Object(_.b)(),n=a.control,o=a.handleSubmit,c=a.reset,r=a.watch;return Object(L.jsxs)("form",{onSubmit:o((function(t){e({type:"add",data:{todoItem:t}}),c({title:"",details:""})})),children:[Object(L.jsx)(_.a,{name:"title",control:n,defaultValue:"",rules:{required:!0},render:function(e){var a=e.field;return Object(L.jsx)(z.a,Object(j.a)(Object(j.a)({},a),{},{label:"TODO",fullWidth:!0,className:t.root}))}}),Object(L.jsx)(_.a,{name:"details",control:n,defaultValue:"",render:function(e){var a=e.field;return Object(L.jsx)(z.a,Object(j.a)(Object(j.a)({},a),{},{label:"Details",fullWidth:!0,multiline:!0,className:t.root}))}}),Object(L.jsx)(V.a,{variant:"contained",color:"primary",type:"submit",disabled:!r("title"),children:"Add"})]})}var at=Object(s.a)({palette:{primary:{main:"#9012fe"},secondary:{main:"#b2aabf"}}});function nt(){return Object(L.jsxs)(i.a,{maxWidth:"sm",children:[Object(L.jsx)("header",{children:Object(L.jsx)(d.a,{variant:"h2",component:"h1",children:"Todo List"})}),Object(L.jsxs)("main",{children:[Object(L.jsx)(et,{}),Object(L.jsx)(Y,{})]})]})}var ot=function(){return Object(L.jsx)(M,{children:Object(L.jsx)(l.a,{theme:at,children:Object(L.jsx)(nt,{})})})},ct=function(t){t&&t instanceof Function&&a.e(3).then(a.bind(null,153)).then((function(e){var a=e.getCLS,n=e.getFID,o=e.getFCP,c=e.getLCP,r=e.getTTFB;a(t),n(t),o(t),c(t),r(t)}))};r.a.render(Object(L.jsx)(o.a.StrictMode,{children:Object(L.jsx)(ot,{})}),document.getElementById("root")),ct()},93:function(t,e,a){}},[[100,1,2]]]);
//# sourceMappingURL=main.40c0009f.chunk.js.map